
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Nginx + uWSGI
(–æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ https://uwsgi-docs.readthedocs.io/en/latest/tutorials/Django_and_nginx.html)

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è postgresql –≤ –ø—Ä–æ–µ–∫—Ç–µ Django –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

- —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å psycopg2;

- —Å–ª–µ–¥—É–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å settings.py –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞:

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'mysite',
        'USER': 'postgres',
        'PASSWORD': 'password',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```

> README –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏, –±—É–¥—É —Ä–∞–¥ –≤–∞—à–∏–º –∑–∞–º–µ—á–∞–Ω–∏—è–º –∏ –ø—Ä–∞–≤–∫–∞–º. üòÉ
> 
> –ü—Ä–æ–¥–æ–ª–∂–∞—é —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è —Å :
> - 4.1 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–æ–≤ Unix –≤–º–µ—Å—Ç–æ –ø–æ—Ä—Ç–æ–≤
> - 4.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ uWSGI –Ω–∞ –∑–∞–ø—É—Å–∫ —Å –ø–æ–º–æ—â—å—é .ini —Ñ–∞–π–ª–∞
> - 4.3 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uWSGI –Ω–∞ –≤—Å—é —Å–∏—Å—Ç–µ–º—É
> - 4.4 –†–µ–∂–∏–º –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–∞
> - 5.0 –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —é–Ω–∏—Ç–æ–≤ systemd –¥–ª—è uWSGI



---

–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:

the web client <-> the web server <-> the socket <-> uwsgi <-> Django

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
  [1. Getting Started:](#title1)
  + [1.1 –ü—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ uWSGI](#title1.1)
  + [1.2 Django](#title1.2)
    
  [2. –ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ uWSGI](#title2)
   + [2.1 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uWSGI –≤ virtualenv](#title2.1)
   + [2.2 –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç Django](#title2.2)
     
  [3. –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å nginx](#title3)
   + [3.1 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ nginx](#title3.1)
   +  [3.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ nginx –¥–ª—è –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞](#title3.2)
   +  [3.3 –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤](#title3.3)  
   + [3.4 –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç nginx](#title3.4)
     
  [4. Nginx, uWSGI –∏ test.py](#title4)
  + [4.1 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–æ–≤ Unix –≤–º–µ—Å—Ç–æ –ø–æ—Ä—Ç–æ–≤](#title4.1)
   + [4.2 –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Django —Å –ø–æ–º–æ—â—å—é uwsgi –∏ nginx](#title4.2)
   + [4.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ uWSGI –Ω–∞ –∑–∞–ø—É—Å–∫ —Å –ø–æ–º–æ—â—å—é .ini —Ñ–∞–π–ª–∞](#title4.3)
   +  [4.4 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uWSGI –Ω–∞ –≤—Å—é —Å–∏—Å—Ç–µ–º—É](#title4.4)
   + [4.5 –†–µ–∂–∏–º –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–∞](#title4.5)
     
  [5. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —é–Ω–∏—Ç–æ–≤ systemd –¥–ª—è uWSGI](#title5)


   
   
## <a id="title1">Getting Started:</a> 


### <a id="title1.1"> 1.1. –ü—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ uWSGI</a> 

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤  –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ (virtualenv) –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞–º –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:  
(–∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞, –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞: cd /home/vboxuser/PycharmProjects/abra1 –∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –≤–∞—à –ø—É—Ç—å):

`source .venv/bin/activate`

---


### <a id="title1.2">1.2 Django</a>

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Django –≤ virtualenv, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–µ–≥–æ:

```
pip install Django
django-admin.py startproject mysite
cd mysite
```

---

## <a id="title2">–ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ uWSGI</a>
### <a id="title2.1">2.1 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uWSGI –≤ virtualenv</a>

`pip install uwsgi`

–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —É –≤–∞—Å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–∞–∫–µ—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Python. –í —Å–ª—É—á–∞–µ Debian –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö –æ—Ç Debian —Å–∏—Å—Ç–µ–º, —Ç–∞–∫–∏—Ö –∫–∞–∫ Ubuntu, –≤–∞–º –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pythonX.Y-dev, –≥–¥–µ X.Y - —ç—Ç–æ –≤–∞—à–∞ –≤–µ—Ä—Å–∏—è Python.

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª test.py /mysite/mysite/test.py  
–í–æ—Ç –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:

```
def application(env, start_response):
    start_response('200 OK', [('Content-Type', 'text/html')])
    return [b"<h1>Hello world</h1>"]
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ uWSGI:

`uwsgi --http :8000 --wsgi-file test.py`

–û–ø—Ü–∏–∏ –æ–∑–Ω–∞—á–∞—é—Ç:

http :8000: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª http, –ø–æ—Ä—Ç 8000

wsgi-file test.py: –∑–∞–≥—Ä—É–∑–∏—Ç—å —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª, test.py

–≠—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ 'hello world' –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ –ø–æ—Ä—Ç 8000. –ü–æ—Å–µ—Ç–∏—Ç–µ:

`http://localhost:8000`

---
### <a id="title2.2">2.2 –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç Django</a>
 
–¢–µ–ø–µ—Ä—å –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã uWSGI –¥–µ–ª–∞–ª —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ –∑–∞–ø—É—Å–∫–∞–ª —Å–∞–π—Ç Django –≤–º–µ—Å—Ç–æ –º–æ–¥—É–ª—è test.py.

–ï—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª–∏ —ç—Ç–æ–≥–æ, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –ø—Ä–æ–µ–∫—Ç mysite –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

python manage.py runserver 0.0.0.0:8000
–ò –µ—Å–ª–∏ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ —Å –ø–æ–º–æ—â—å—é uWSGI:

`uwsgi --http :8000 --module mysite.wsgi`

module mysite.wsgi: –∑–∞–≥—Ä—É–∑–∫–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è wsgi

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä; –µ—Å–ª–∏ —Å–∞–π—Ç –ø–æ—è–≤–∏–ª—Å—è, –∑–Ω–∞—á–∏—Ç, uWSGI –º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –≤–∞—à–µ Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã, –∏ —ç—Ç–æ—Ç —Å—Ç–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

–≤–µ–±-–∫–ª–∏–µ–Ω—Ç <-> uWSGI <-> Django

–û–±—ã—á–Ω–æ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ uWSGI. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞ –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –∑–≤–µ–Ω–∞.

---
## <a id="title3">–û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å nginx </a>
 
### <a id="title3.1">3.1 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ nginx </a>
–£—Å—Ç–∞–Ω–æ–≤–∫–∞:


`sudo apt-get install nginx`

`sudo /etc/init.d/nginx start # –∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx`



–ê —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ nginx —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–π–¥—è –Ω–∞ –Ω–µ–≥–æ —á–µ—Ä–µ–∑ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä –ø–æ –ø–æ—Ä—Ç—É 80 - –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç nginx: ¬´Welcome to nginx!¬ª. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ:

–≤–µ–±-–∫–ª–∏–µ–Ω—Ç <-> –≤–µ–±-—Å–µ—Ä–≤–µ—Ä


–ï—Å–ª–∏ –Ω–∞ 80-–º –ø–æ—Ä—Ç—É —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ, –∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å nginx –¥–ª—è —ç—Ç–æ–≥–æ, –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å nginx –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –¥—Ä—É–≥–∏–º –ø–æ—Ä—Ç–æ–º. –í —ç—Ç–æ–º —É—á–µ–±–Ω–∏–∫–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç 8000.

---

### <a id="title3.2">3.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ nginx –¥–ª—è —Å–∞–π—Ç–∞</a>



–í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ñ–∞–π–ª uwsgi_params, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ nginx –≤ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ uWSGI –∏–ª–∏ –Ω–∞ —Å–∞–π—Ç–µ https://github.com/nginx/nginx/blob/master/conf/uwsgi_params.

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –≤ –∫–∞—Ç–∞–ª–æ–≥ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ß–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –º—ã —É–∫–∞–∂–µ–º nginx —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –Ω–µ–≥–æ.

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª mysite_nginx.conf –≤ –∫–∞—Ç–∞–ª–æ–≥–µ /etc/nginx/sites-available/ –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ –≤ –Ω–µ–≥–æ —Å–ª–µ–¥—É—é—â–µ–µ:

–≠—Ç–æ—Ç conf-—Ñ–∞–π–ª —É–∫–∞–∑—ã–≤–∞–µ—Ç nginx –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –º–µ–¥–∏–∞- –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã, –∞ —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ Django. –ü—Ä–∏ –±–æ–ª—å—à–æ–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π, —á—Ç–æ–±—ã –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –æ–±—Å–ª—É–∂–∏–≤–∞–ª —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ/–º–µ–¥–∏–π–Ω—ã–µ —Ñ–∞–π–ª—ã, –∞ –¥—Ä—É–≥–æ–π - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Django, –Ω–æ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏ —ç—Ç–æ–≥–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

–°–¥–µ–ª–∞–π—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏–∑ /etc/nginx/sites-enabled, —á—Ç–æ–±—ã nginx –º–æ–≥ –µ–≥–æ –≤–∏–¥–µ—Ç—å:

`sudo ln -s /etc/nginx/sites-available/mysite_nginx.conf /etc/nginx/sites-enabled/`

–ò–ª–∏ —Å–¥–µ–ª–∞–π—Ç–µ —Å—Å—ã–ª–∫—É –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞:

`sudo ln -s /mysite/mysite/mysite_nginx.conf /etc/nginx/sites-enabled/`

---
### <a id="title3.3">3.3 –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤</a>

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º nginx –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã Django –≤ –ø–∞–ø–∫–µ static. –î–ª—è —ç—Ç–æ–≥–æ —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª mysite/settings.py, –¥–æ–±–∞–≤–∏–≤ –≤ –Ω–µ–≥–æ:

`STATIC_ROOT = os.path.join(BASE_DIR, ¬´static/¬ª)`

–∞ –∑–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å

`python manage.py collectstatic`

---

### <a id="title3.4">3.4 –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç nginx </a>


–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx:

`sudo /etc/init.d/nginx restart`

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã, –¥–æ–±–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∏–º–µ–Ω–µ–º media.png –≤ –∫–∞—Ç–∞–ª–æ–≥ /path/to/your/project/project/media, –∞ –∑–∞—Ç–µ–º –ø–æ—Å–µ—Ç–∏—Ç–µ http://localhost:8000/media/media.png - –µ—Å–ª–∏ —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–æ –≤—ã –±—É–¥–µ—Ç–µ –∑–Ω–∞—Ç—å, —á—Ç–æ nginx –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ.  
(/mysite/media/123.jpg  http://localhost:8000/media/123.jpg )

–°—Ç–æ–∏—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å nginx, –∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∑–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ —Å–Ω–æ–≤–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —É–∑–Ω–∞—Ç—å, –µ—Å—Ç—å –ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –∏ –≥–¥–µ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è.

---

## <a id="title4">Nginx, uWSGI –∏ test.py </a>
 
–î–∞–≤–∞–π—Ç–µ –∑–∞—Å—Ç–∞–≤–∏–º nginx –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é test.py ¬´hello world¬ª.

`uwsgi --socket :8001 --wsgi-file test.py`

–≠—Ç–æ –ø–æ—á—Ç–∏ —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ —Ä–∞–Ω—å—à–µ, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–æ–≥–æ, —á—Ç–æ –≤ —ç—Ç–æ—Ç —Ä–∞–∑ –æ–¥–Ω–∞ –∏–∑ –æ–ø—Ü–∏–π –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è:

socket :8001: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª uwsgi, –ø–æ—Ä—Ç 8001

–¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º nginx –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å uWSGI —á–µ—Ä–µ–∑ —ç—Ç–æ—Ç –ø–æ—Ä—Ç, –∞ —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º - —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 8000. –ü–æ—Å–µ—Ç–∏—Ç–µ:

`http://localhost:8000/`

—á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å. –ò —ç—Ç–æ –Ω–∞—à —Å—Ç–µ–∫:

–≤–µ–±-–∫–ª–∏–µ–Ω—Ç <-> –≤–µ–±-—Å–µ—Ä–≤–µ—Ä <-> —Å–æ–∫–µ—Ç <-> uWSGI <-> Python


–¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –≤—ã–≤–æ–¥ uwsgi –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8001 - –Ω–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–∞—à –±—Ä–∞—É–∑–µ—Ä –≥–æ–≤–æ—Ä–∏—Ç –Ω–∞ http, –∞ –Ω–µ –Ω–∞ uWSGI, —Ö–æ—Ç—è –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤—ã–≤–æ–¥ uWSGI –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

### <a id="title4.1">4.1 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–æ–≤ Unix –≤–º–µ—Å—Ç–æ –ø–æ—Ä—Ç–æ–≤ </a> 
–î–æ —Å–∏—Ö –ø–æ—Ä –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å–æ–∫–µ—Ç—ã TCP-–ø–æ—Ä—Ç–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –ø—Ä–æ—â–µ, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–∫–µ—Ç—ã Unix, —á–µ–º –ø–æ—Ä—Ç—ã - –º–µ–Ω—å—à–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤.

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª mysite_nginx.conf, –∏–∑–º–µ–Ω–∏–≤ –µ–≥–æ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π:

```
server unix:///path/to/your/mysite/mysite.sock; # –¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Å–æ–∫–µ—Ç–∞

#server 127.0.0.1:8001; # –¥–ª—è —Å–æ–∫–µ—Ç–∞ –≤–µ–±-–ø–æ—Ä—Ç–∞ (–º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)
```

–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx.

–°–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ uWSGI:

`uwsgi --socket mysite.sock --wsgi-file test.py`


–ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –æ–ø—Ü–∏—è socket —É–∫–∞–∑—ã–≤–∞–µ—Ç uWSGI, –∫–∞–∫–æ–π —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –Ω–∞ http://localhost:8000/ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∂—É—Ä–Ω–∞–ª –æ—à–∏–±–æ–∫ nginx (/var/log/nginx/error.log). –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

`connect() to unix:///path/to/your/mysite/mysite.sock failed (13: Permission denied)`

—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤–∞–º –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∫–µ—Ç, —á—Ç–æ–±—ã nginx –º–æ–≥ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:

`uwsgi --socket mysite.sock --wsgi-file test.py --chmod-socket=666 # (–æ—á–µ–Ω—å —Ä–∞–∑—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ)`

–∏–ª–∏:

`uwsgi --socket mysite.sock --wsgi-file test.py --chmod-socket=664 # (–±–æ–ª–µ–µ —Ä–∞–∑—É–º–Ω–æ).`


–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º —Ç–∞–∫–∂–µ –ø—Ä–∏–¥–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É nginx (–∫–æ—Ç–æ—Ä–∞—è, –≤–µ—Ä–æ—è—Ç–Ω–æ, —è–≤–ª—è–µ—Ç—Å—è www-data) –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, —á—Ç–æ–±—ã nginx –º–æ–≥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å –≤ –≤–∞—à —Å–æ–∫–µ—Ç.

–°—Ç–æ–∏—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–≤–æ–¥ –∂—É—Ä–Ω–∞–ª–∞ nginx –≤ –æ–∫–Ω–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –ª–µ–≥–∫–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–µ–º—É –ø—Ä–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–µ–ø–æ–ª–∞–¥–æ–∫.

### <a id="title4.2">4.2 –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Django —Å –ø–æ–º–æ—â—å—é uwsgi –∏ nginx </a>


–î–∞–≤–∞–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏–º –Ω–∞—à–µ Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

uwsgi --socket mysite.sock --module mysite.wsgi --chmod-socket=664

–¢–µ–ø–µ—Ä—å uWSGI –∏ nginx –¥–æ–ª–∂–Ω—ã –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ –º–æ–¥—É–ª—å ¬´Hello World¬ª, –∞ –≤–∞—à –ø—Ä–æ–µ–∫—Ç Django.

### <a id="title4.3">4.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ uWSGI –Ω–∞ –∑–∞–ø—É—Å–∫ —Å –ø–æ–º–æ—â—å—é .ini —Ñ–∞–π–ª–∞  </a>

–ú—ã –º–æ–∂–µ–º –ø–æ–º–µ—Å—Ç–∏—Ç—å —Ç–µ –∂–µ –æ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤ uWSGI, –≤ —Ñ–∞–π–ª, –∞ –∑–∞—Ç–µ–º –ø–æ–ø—Ä–æ—Å–∏—Ç—å uWSGI —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–∏–º —Ñ–∞–π–ª–æ–º. –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏.

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º `mysite_uwsgi.ini`:

–ò –∑–∞–ø—É—Å—Ç–∏—Ç–µ uwsgi, –∏—Å–ø–æ–ª—å–∑—É—è —ç—Ç–æ—Ç —Ñ–∞–π–ª:

uwsgi --ini mysite_uwsgi.ini # –æ–ø—Ü–∏—è --ini –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ñ–∞–π–ª–∞
–ï—â–µ —Ä–∞–∑ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∞–π—Ç Django —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫, –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å.

### <a id="title4.4">4.4 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uWSGI –Ω–∞ –≤—Å—é —Å–∏—Å—Ç–µ–º—É  </a>

–ü–æ–∫–∞ —á—Ç–æ uWSGI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—à–µ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ, –Ω–æ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ –≤–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ.

–î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–≤–æ–π virtualenv:

`deactivate`

–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uWSGI –Ω–∞ –≤—Å—é —Å–∏—Å—Ç–µ–º—É:

`sudo pip install uwsgi`

–ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ LTS (–¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É):

`pip install https://projects.unbit.it/downloads/uwsgi-lts.tar.gz`


–ù–∞ –≤–∏–∫–∏ uWSGI –æ–ø–∏—Å–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–¥—É—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏. –ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π uWSGI –Ω–∞ –≤—Å—é —Å–∏—Å—Ç–µ–º—É —Å—Ç–æ–∏—Ç –ø–æ–¥—É–º–∞—Ç—å, –∫–∞–∫—É—é –≤–µ—Ä—Å–∏—é –≤—ã–±—Ä–∞—Ç—å –∏ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

–ï—â–µ —Ä–∞–∑ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å uWSGI —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ:

`uwsgi --ini mysite_uwsgi.ini # –æ–ø—Ü–∏—è --ini –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ñ–∞–π–ª–∞`

### <a id="title4.5">4.5 –†–µ–∂–∏–º –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–∞  </a>

uWSGI –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ ¬´–∏–º–ø–µ—Ä–∞—Ç–æ—Ä–∞¬ª. –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –æ–Ω —Å–ª–µ–¥–∏—Ç –∑–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ uWSGI –∏ –ø–æ—Ä–æ–∂–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã (¬´–≤–∞—Å—Å–∞–ª—ã¬ª) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö.

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –≤–∞—Å—Å–∞–ª–∞.

—Å–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è –≤–∞—Å—Å–∞–ª–æ–≤

`sudo mkdir -p /etc/uwsgi/vassals`

—Å—Å—ã–ª–∫–∞ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –≤–∞—à —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

`sudo ln -s /path/to/your/mysite/mysite_uwsgi.ini /etc/uwsgi/vassals/`

–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–∞

`uwsgi --emperor /etc/uwsgi/vassals --uid www-data --gid www-data`

–í–∞–º –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å uWSGI —Å –ø—Ä–∞–≤–∞–º–∏ sudo:

`sudo uwsgi --emperor /etc/uwsgi/vassals --uid www-data --gid www-data`

–û–ø—Ü–∏–∏ –æ–∑–Ω–∞—á–∞—é—Ç:

emperor: –≥–¥–µ –∏—Å–∫–∞—Ç—å –≤–∞—Å—Å–∞–ª–æ–≤ (—Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

uid: –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ—Å–ª–µ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞

gid: –≥—Ä—É–ø–ø–æ–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ—Å–ª–µ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–π—Ç; –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω.


## <a id="title5">–°–æ–∑–¥–∞–Ω–∏–µ —é–Ω–∏—Ç-—Ñ–∞–π–ª–∞  systemd –¥–ª—è uWSGI </a>

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –Ω–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ Django, –Ω–æ –º—ã –≤—Å–µ –µ—â–µ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å. –î–∞–ª–µ–µ –º—ã —Å–æ–∑–¥–∞–¥–∏–º —é–Ω–∏—Ç-—Ñ–∞–π–ª systemd –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ uWSGI –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

–ú—ã —Å–æ–∑–¥–∞–¥–∏–º —é–Ω–∏—Ç-—Ñ–∞–π–ª –≤ –∫–∞—Ç–∞–ª–æ–≥–µ /etc/systemd/system, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —é–Ω–∏—Ç-—Ñ–∞–π–ª—ã. –ú—ã –Ω–∞–∑–æ–≤–µ–º –Ω–∞—à —Ñ–∞–π–ª uwsgi.service:

`sudo nano /etc/systemd/system/uwsgi.service`

–ù–∞—á–Ω–∏—Ç–µ —Å —Ä–∞–∑–¥–µ–ª–∞ [Unit], –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–µ. –ú—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ—Å—Ç–∏–º —Å—é–¥–∞ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:

```
/etc/systemd/system/uwsgi.service

[Unit]
Description=uWSGI Emperor service
```

–î–∞–ª–µ–µ –º—ã –æ—Ç–∫—Ä–æ–µ–º —Ä–∞–∑–¥–µ–ª [Service]. –° –ø–æ–º–æ—â—å—é –¥–∏—Ä–µ–∫—Ç–∏–≤—ã ExecStartPre –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–º —á–∞—Å—Ç–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞. –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∫–∞—Ç–∞–ª–æ–≥ /run/uwsgi —Å–æ–∑–¥–∞–Ω –∏ —á—Ç–æ –Ω–∞—à –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ª–∞–¥–µ–µ—Ç –∏–º, –∞ –≥—Ä—É–ø–ø–∞ www-data —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –≥—Ä—É–ø–ø—ã. –ò mkdir —Å —Ñ–ª–∞–≥–æ–º -p, –∏ –∫–æ–º–∞–Ω–¥–∞ chown –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –∏—Ö —Ä–∞–±–æ—Ç–µ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –≠—Ç–æ —Ç–æ, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ.

–î–ª—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞, —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–∏–≤–æ–π ExecStart, –º—ã —É–∫–∞–∂–µ–º –Ω–∞ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª uwsgi. –ú—ã —É–∫–∞–∂–µ–º –µ–º—É –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –≤ ¬´—Ä–µ–∂–∏–º–µ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–∞¬ª, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –µ–º—É —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ —Å –ø–æ–º–æ—â—å—é —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –Ω–∞–π–¥–µ—Ç –≤ /etc/uwsgi/sites. –ú—ã —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º —ç–ª–µ–º–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ systemd –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º. –û–Ω–∏ –≤–∑—è—Ç—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ uWSGI –∑–¥–µ—Å—å.

```
/etc/systemd/system/uwsgi.service

[Unit]
Description=uWSGI Emperor service

[Service]
ExecStartPre=/bin/bash -c 'mkdir -p /run/uwsgi; chown sammy:www-data /run/uwsgi'
ExecStart=/usr/local/bin/uwsgi --emperor /etc/uwsgi/sites
Restart=always
KillSignal=SIGQUIT
Type=notify
NotifyAccess=all
```
